<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title></title><link rel="stylesheet" href="style_cache/github-ce7ab9b7dbd81fa8f2eeff348bc97553a3eaf80c.css" />
  <link rel="stylesheet" href="style_cache/github2-729e3ebdf8b0ec6ed54532c398dc8bd48d25ea1f.css" />
  <style>
    .file-box {
      margin: 64px auto;
      width: 920px;
    }
	body {
		font-size: 14px;
		line-height: 22px;
		<!--font-family: "adelle",Georgia,"Times New Roman",serif;-->
		color: #4e443c;
		background: #f0efe7;
	}

	.book-toc {

	}
	a {
		color: #0388a6;
		text-decoration: none;
	}
	a:hover {
		color: #04b1d8;
		text-decoration: none;
	}
	ol.book-toc li.chapter{
		margin-bottom:0.6em
	}
	ol.book-toc, ol{
		list-style-type: disc
	}
	ol.book-toc{
		margin:30px 36px
	}
	ol.book-toc a{
		padding-left:4px
	}
	li {
		line-height: 22px;
	}
	h1, h2, h3, h4, h5, h6, li, p, a, ol, div{
		margin: 0;
		padding: 0;
		border: 0;
		vertical-align: baseline;
	}
	ul, ol {
		padding: 0;
		margin: 0 0 11px 25px;
	}
	h1 {
		font-size: 36px;
		line-height: 44px;
		margin-bottom: 0.4em;
	}
	h2 {
		font-size: 18px;
		color: #f14e32;
		font-weight: bold;
	}
	h3, h4, h5, h6 {
		font-size: 14px;
		color: #f14e32;
		font-weight: bold;
	}
	ol.book-toc h1{
		font-size: 22px;
		line-height: 44px;
		margin-bottom: 0.4em;
	}
	ol.book-toc h2 {
		font-size: 16px;
		color: #f14e32;
		font-weight: bold;
	}
	ol.book-toc h3, h4, h5, h6 {
		font-size: 14px;
		color: #f14e32;
		font-weight: bold;
	}
	p {
		margin: 0 0 11px;
		font-size: 14px;
		line-height: 22px;
	}
	div {
		display: block;
	}
	div#nav{
		padding: 30px
	}
  </style>
</head>
<body>
  <div class="page">
    <div class="file-box">
	<div class="file">
		<div id="readme" class="blob instapaper_body announce md">
		  <article class="markdown-body entry-content" itemprop="mainContentOfPage">
			<h1>
<a name="%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B9%9D%E7%AB%A0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB" class="anchor" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B9%9D%E7%AB%A0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB"><span class="octicon octicon-link"></span></a>第二十九章：字符串编辑距离</h1>

<h2>
<a name="%E5%89%8D%E8%A8%80" class="anchor" href="#%E5%89%8D%E8%A8%80"><span class="octicon octicon-link"></span></a>前言</h2>

<p>上一章和这一章的问题皆是各大IT公司最喜欢出的笔试面试题之一，比如说前者是小米2013年校招笔试原题，而后者则更是反复出现，如去年9月26日百度一二面试题，10月9日腾讯面试题第1小题，10月13日百度2013校招北京站笔试题第二 大道题第3小题，及去年10月15日2013年Google校招笔试最后一道大题皆是考察的这个字符串编辑距离问题。  </p>

<p><strong>题目描述:</strong> 给定一个源串和目标串，能够对源串进行如下操作：<br>
1. 在给定位置上插入一个字符<br>
2. 替换任意字符<br>
3. 删除任意字符  </p>

<p>写一个程序，返回最小操作数，使得对源串进行这些操作后等于目标串，源串和目标串的长度都小于2000。  </p>

<p><strong>提醒：</strong>上文前言中已经说过了，此题反复出现，最近考的最多的是百度和Google的笔试面试经常考察。下图则是2013年Google的校招试题原景重现：  </p>

<p><a href="../images/28%7E29/29.1.jpg" target="_blank"><img src="../images/28%7E29/29.1.jpg" alt="" style="max-width:100%;"></a></p>

<p><strong>解法一、</strong>此题跟上面的最大连续乘积子串类似，常见的思路是动态规划，下面是简单的DP状态方程：</p>

<div class="highlight highlight-c"><pre><span class="c1">// 动态规划：</span>

<span class="c1">// f[i,j]表示s[0...i]与t[0...j]的最小编辑距离。</span>
<span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span> <span class="p">{</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="n">f</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">}</span>

<span class="c1">// 分别表示：添加1个，删除1个，替换1个（相同就不用替换）。</span>
</pre></div>

<p><strong>解法二、</strong>本解法来自<a href="http://www.51weixue.com/thread-482-1-1.html">为学论坛</a>。</p>

<p>编辑距离的定义和计算方法如下：<br>
Given two strings A and B, edit A to B with the minimum number of edit operations:  </p>

<p>a) .Replace a letter with another letter
b) .Insert a letter
c) .Delete a letter</p>

<p>e.g.<br>
A = interestingly    <em>i</em>_nterestingly<br>
B = bioinformatics   bioinformatics__<br>
                     1011011011001111<br>
Edit distance = 11<br>
Instead of minimizing the number of edge operations, we can associate a cost function to the operations and minimize the total cost. Such cost is called edit distance. Instead of using string edit, in computational biology, people like to use string alignment.We use similarity function, instead of cost function, to evaluate the goodness of the alignment.<br>
e.g. of similarity function: match – 2, mismatch, insert, delete – -1.<br>
Consider two strings ACAATCC and AGCATGC.<br>
One of their alignment is  </p>

<p><a href="../images/28%7E29/29.2.jpg" target="_blank"><img src="../images/28%7E29/29.2.jpg" alt="" style="max-width:100%;"></a></p>

<p>In the above alignment, space (‘_’) is introduced to both strings. There are 5 matches, 1 mismatch, 1 insert, and 1 delete.The alignment has similarity score 7.<br>
A_CAATCC<br>
AGCA_TGC<br>
Note that the above alignment has the maximum score.Such alignment is called optimal alignment.String alignment problem tries to find the alignment with the maximum similarity score!String alignment problem is also called global alignment problem.<br>
Needleman-Wunsch algorithm
Consider two strings S[1..n] and T[1..m].Define V(i, j) be the score of the optimal alignment between S[1..i] and T[1..j].<br>
Basis:<br>
V(0, 0) = 0<br>
V(0, j) = V(0, j-1) + d(_, T[j])：Insert j times<br>
V(i, 0) = V(i-1, 0) + d(S,_)：Delete i times<br>
that is:  </p>

<p><a href="../images/28%7E29/29.3.jpg" target="_blank"><img src="../images/28%7E29/29.3.jpg" alt="" style="max-width:100%;"></a></p>

<p>Example :  </p>

<p><a href="../images/28%7E29/29.4.jpg" target="_blank"><img src="../images/28%7E29/29.4.jpg" alt="" style="max-width:100%;"></a></p>

<p>下面是代码，测试数据比较少，若有问题请指正：  </p>

<div class="highlight highlight-cpp"><pre><span class="c1">//copyright@ peng_weida</span>
<span class="c1">//实现代码如下：</span>
<span class="c1">//头文件StrEditDistance.h</span>
<span class="cp">#pragma once</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="k">class</span> <span class="nc">CStrEditDistance</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">CStrEditDistance</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrRow</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrColumn</span><span class="p">);</span>
    <span class="o">~</span><span class="n">CStrEditDistance</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
    <span class="kt">int</span>  <span class="nf">getScore</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_Score</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span>  <span class="nf">getEditDis</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_EditDis</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">setEditDis</span><span class="p">(</span><span class="kt">int</span> <span class="n">vDis</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">m_EditDis</span> <span class="o">=</span> <span class="n">vDis</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">setScore</span><span class="p">(</span><span class="kt">int</span> <span class="n">vScore</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">m_Score</span> <span class="o">=</span> <span class="n">vScore</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrRow</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrColumn</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">getMaxValue</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">c</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">)</span> <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
            <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
            <span class="k">return</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="o">?</span> <span class="n">c</span> <span class="o">:</span> <span class="n">a</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">int</span>   <span class="n">m_EditDis</span><span class="p">;</span>
    <span class="kt">int</span>   <span class="n">m_Score</span><span class="p">;</span>
<span class="p">};</span>
<span class="c1">//源文件StrEditDistance.cpp</span>
<span class="cp">#include "StrEditDistance.h"</span>
<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;iomanip&gt;</span>
<span class="cp">#define MATCH        2</span>
<span class="cp">#define MISS_MATCH   -1</span>
<span class="cp">#define INSERT       -1</span>
<span class="cp">#define DELETE       -1</span>
<span class="n">CStrEditDistance</span><span class="o">::</span><span class="n">CStrEditDistance</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrRow</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrColumn</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">process</span><span class="p">(</span><span class="n">vStrRow</span><span class="p">,</span> <span class="n">vStrColumn</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">CStrEditDistance</span><span class="o">::~</span><span class="n">CStrEditDistance</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="c1">//FUNCTION:</span>
<span class="kt">void</span> <span class="n">CStrEditDistance</span><span class="o">::</span><span class="n">process</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrRow</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">vStrColumn</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">editDis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>     <span class="c1">//编辑距离</span>
    <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">vStrColumn</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">column</span> <span class="o">=</span> <span class="n">vStrRow</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">sizeR</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">sizeC</span> <span class="o">=</span> <span class="n">column</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kt">int</span> <span class="o">**</span><span class="n">pScore</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">*</span><span class="p">[</span><span class="n">sizeR</span><span class="p">];</span>  <span class="c1">//二维指针</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">pScore</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">sizeC</span><span class="p">];</span>

    <span class="c1">//初始化第一行和第一列</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">column</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span>
        <span class="n">pScore</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="n">c</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span>
        <span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="n">r</span><span class="p">;</span>

    <span class="c1">//从v(1,1)开始每列计算</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">column</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//计算v(i,j)</span>
            <span class="kt">int</span> <span class="n">valueMatch</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">vStrColumn</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">vStrRow</span><span class="p">[</span><span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">valueMatch</span> <span class="o">=</span> <span class="n">MATCH</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="n">valueMatch</span> <span class="o">=</span> <span class="n">MISS_MATCH</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">A</span> <span class="o">=</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="n">INSERT</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">B</span> <span class="o">=</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">DELETE</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">C</span> <span class="o">=</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">valueMatch</span><span class="p">;</span>
            <span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">getMaxValue</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//计算编辑距离</span>
    <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">row</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">column</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">editDis</span><span class="o">++</span><span class="p">;</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">editDis</span><span class="o">++</span><span class="p">;</span>
            <span class="n">c</span><span class="o">--</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pScore</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">pScore</span><span class="p">[</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        <span class="p">{</span>
            <span class="n">editDis</span><span class="o">++</span><span class="p">;</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
            <span class="n">c</span><span class="o">--</span><span class="p">;</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
            <span class="n">c</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>  <span class="n">editDis</span> <span class="o">+=</span> <span class="n">r</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">editDis</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="c1">//----------------DEBUG-------------------//</span>
    <span class="c1">//打印数据</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">column</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">pScore</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">"  "</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="c1">//设置编辑距离和得分</span>
    <span class="n">setEditDis</span><span class="p">(</span><span class="n">editDis</span><span class="p">);</span>
    <span class="n">setScore</span><span class="p">(</span><span class="n">pScore</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>   <span class="c1">//释放内存</span>
    <span class="p">{</span>
        <span class="k">delete</span> <span class="n">pScore</span><span class="p">;</span>
        <span class="n">pScore</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">pScore</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><strong>类似</strong><br>
上述问题类似于编程之美上的下述一题「以下内容摘自编程之美第3.3节」：  </p>

<p>许多程序会大量使用字符串。对于不同的字符串，我们希望能够有办法判断其相似程度。我们定义了一套操作方法来把两个不相同的字符串变得相同，具体的操作方法为：  </p>

<ol>
<li>修改一个字符（如把“a”替换为“b”）；<br>
</li>
<li>增加一个字符（如把“abdd ”变为“aebdd ”）；<br>
</li>
<li>删除一个字符（如把“travelling”变为“traveling”）。<br>
</li>
</ol><p>比如，对于“abcdefg”和“abcdef ”两个字符串来说，我们认为可以通过增加/减少一个“g”的方式来达到目的。上面的两种方案，都仅需要一次操作。把这个操作所需要的次数定义为两个字符串的距离，而相似度等于“距离+1”的倒数。也就是说，“abcdefg”和“abcdef”的距离为1，相似度为1 / 2 = 0.5。<br>
给定任意两个字符串，你是否能写出一个算法来计算出它们的相似度呢？  </p>

<p><a href="../images/28%7E29/29.5.jpg" target="_blank"><img src="../images/28%7E29/29.5.jpg" alt="" style="max-width:100%;"></a></p>

<p>这样，很快就可以完成一个递归程序，如下所示：</p>

<div class="highlight highlight-java"><pre><span class="n">Int</span> <span class="nf">CalculateStringDistance</span><span class="o">(</span><span class="n">string</span> <span class="n">strA</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pABegin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pAEnd</span><span class="o">,</span>
                            <span class="n">string</span> <span class="n">strB</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pBBegin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pBEnd</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">pABegin</span> <span class="o">&gt;</span> <span class="n">pAEnd</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pBBegin</span> <span class="o">&gt;</span> <span class="n">pBEnd</span><span class="o">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">else</span>

            <span class="k">return</span> <span class="n">pBEnd</span> <span class="err">–</span> <span class="n">pBBegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">pBBegin</span> <span class="o">&gt;</span> <span class="n">pBEnd</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pABegin</span> <span class="o">&gt;</span> <span class="n">pAEnd</span><span class="o">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="n">pAEnd</span> <span class="err">–</span> <span class="n">pABegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">strA</span><span class="o">[</span><span class="n">pABegin</span><span class="o">]</span> <span class="o">==</span> <span class="n">strB</span><span class="o">[</span><span class="n">pBBegin</span><span class="o">])</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="nf">CalculateStringDistance</span><span class="o">(</span><span class="n">strA</span><span class="o">,</span> <span class="n">pABegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pAEnd</span><span class="o">,</span>
                                       <span class="n">strB</span><span class="o">,</span> <span class="n">pBBegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pBEnd</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span>
    <span class="o">{</span>
        <span class="kt">int</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">CalculateStringDistance</span><span class="o">(</span><span class="n">strA</span><span class="o">,</span> <span class="n">pABegin</span><span class="o">,</span> <span class="n">pAEnd</span><span class="o">,</span> <span class="n">strB</span><span class="o">,</span>
                                         <span class="n">pBBegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pBEnd</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">CalculateStringDistance</span><span class="o">(</span><span class="n">strA</span><span class="o">,</span> <span class="n">pABegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pAEnd</span><span class="o">,</span>
                                         <span class="n">strB</span><span class="o">,</span> <span class="n">pBBegin</span><span class="o">,</span> <span class="n">pBEnd</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">t3</span> <span class="o">=</span> <span class="n">CalculateStringDistance</span><span class="o">(</span><span class="n">strA</span><span class="o">,</span> <span class="n">pABegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pAEnd</span><span class="o">,</span>
                                         <span class="n">strB</span><span class="o">,</span> <span class="n">pBBegin</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pBEnd</span><span class="o">);</span>
        <span class="k">return</span> <span class="nf">minValue</span><span class="o">(</span><span class="n">t1</span><span class="o">,</span> <span class="n">t2</span><span class="o">,</span> <span class="n">t3</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>上面的递归程序，有什么地方需要改进呢？在递归的过程中，有些数据被重复计算了。比如，如果开始我们调用CalculateStringDistance(strA,1, 2, strB, 1, 2)，下图是部分展开的递归调用。  </p>

<p><a href="../images/28%7E29/29.6.jpg" target="_blank"><img src="../images/28%7E29/29.6.jpg" alt="" style="max-width:100%;"></a></p>

<p>可以看到，圈中的两个子问题被重复计算了。为了避免这种不必要的重复计算，可以把子问题计算后的解存储起来。如何修改递归程序呢？还是DP！请看此<a href="http://www.cnblogs.com/yujunyong/articles/2004724.html">链接</a>。   </p>

<h2>
<a name="%E6%B7%B1%E5%85%A5" class="anchor" href="#%E6%B7%B1%E5%85%A5"><span class="octicon octicon-link"></span></a>深入</h2>

<p>1.详细读者朋友们也已经看到了，百度/Google经常喜欢出这个字符串编辑距离，实际上，关于这个“编辑距离”问题在搜索引擎中有着重要的作用，如搜索引擎关键字查询中拼写错误的提示，如下图所示，当你输入“<a href="https://www.google.com.hk/search?hl=zh-CN&amp;newwindow=1&amp;safe=strict&amp;site=&amp;source=hp&amp;q=Jult&amp;btnK=Google+%E6%90%9C%E7%B4%A2">Jult</a>”后，因为没有这个单词“Jult”，所以搜索引擎猜测你可能是输入错误，进而会提示你是不是找“July”：</p>

<p><a href="../images/28%7E29/29.7.jpg" target="_blank"><img src="../images/28%7E29/29.7.jpg" alt="" style="max-width:100%;"></a></p>

<p>但这个拼写错误检查的原理是什么呢？Google是基于贝叶斯统计推断的方法，相关原理详情可以看下Google的研发总监Peter Norvig写的<a href="http://norvig.com/spell-correct.html">这篇文章</a>，以及fuanyif写的<a href="http://www.ruanyifeng.com/blog/2012/10/spelling_corrector.html">这篇</a>。  </p>

<p>2.关于什么是“编辑距离”：一个快速、高效的Levenshtein算法实现，这个是计算两个字符串的算法，Levenshtein距离又称为“编辑距离”，是指两个字符串之间，由一个转换成另一个所需的最少编辑操作次数。当然，次数越小越相似。这里有一个BT树的<a href="http://blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees">数据结构</a>，挺有意思的。  </p>

<p>3.最后，Lucene中也有这个算法的实现(我想，一般的搜索引擎一般都应该会有此项拼写错误检查功能的实现)，下面是lucene的源码(并没有太多优化，与实际工程中java注重实用性的原则并不背离)：  </p>

<div class="highlight highlight-java"><pre><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">LevensteinDistance</span>
<span class="o">{</span>

    <span class="kd">public</span> <span class="nf">LevensteinDistance</span> <span class="o">()</span> <span class="o">{</span> <span class="o">}</span>

    <span class="c1">// Compute Levenshtein distance:</span>
    <span class="c1">// see org.apache.commons.lang.StringUtils#getLevenshteinDistance(String, String)</span>

    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">getDistance</span> <span class="o">(</span><span class="n">String</span> <span class="n">target</span><span class="o">,</span> <span class="n">String</span> <span class="n">other</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">char</span><span class="o">[]</span> <span class="n">sa</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">p</span><span class="o">[];</span>
        <span class="c1">//'previous' cost array, horizontally</span>
        <span class="kt">int</span> <span class="n">d</span><span class="o">[];</span>
        <span class="c1">// cost array, horizontally</span>
        <span class="kt">int</span> <span class="n">_d</span><span class="o">[];</span>
        <span class="c1">//placeholder to assist in swapping p and d</span>

        <span class="n">sa</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
        <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>

        <span class="kd">final</span> <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">==</span> <span class="n">m</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">else</span>
            <span class="o">{</span>
                <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// indexes into strings s and t</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">;</span>
        <span class="c1">// iterates through s</span>
        <span class="kt">int</span> <span class="n">j</span><span class="o">;</span>
        <span class="c1">// iterates through t</span>
        <span class="kt">char</span> <span class="n">t_j</span><span class="o">;</span>
        <span class="c1">// jth character of t</span>
        <span class="kt">int</span> <span class="n">cost</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
        <span class="o">{</span>
            <span class="n">p</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span>
        <span class="o">{</span>
            <span class="n">t_j</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">d</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span>

            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="n">cost</span> <span class="o">=</span> <span class="n">sa</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="n">t_j</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="o">;</span>

                <span class="c1">// minimum of cell to the left+1, to the top+1, diagonally left and up +cost</span>
                <span class="n">d</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">d</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">p</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">),</span>  <span class="n">p</span><span class="o">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="n">cost</span><span class="o">);</span>
            <span class="o">}</span>


            <span class="c1">// copy current distance counts to 'previous row' distance counts</span>
            <span class="n">_d</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">d</span><span class="o">;</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">_d</span><span class="o">;</span>
        <span class="o">}</span>


        <span class="c1">// our last action in the above loop was to switch d and p, so p now</span>

        <span class="c1">// actually has the most recent cost counts</span>
        <span class="k">return</span> <span class="mf">1.0f</span> <span class="o">-</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span> <span class="n">p</span><span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="o">/</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">length</span><span class="o">(),</span> <span class="n">sa</span><span class="o">.</span><span class="na">length</span><span class="o">));</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>

<h2>
<a name="%E6%89%A9%E5%B1%95" class="anchor" href="#%E6%89%A9%E5%B1%95"><span class="octicon octicon-link"></span></a>扩展</h2>

<p>当然，面试官还可以继续问下去，如请问，如何设计一个比较这篇文章和上一篇文章相似性的算法？这个问题的讨论可以看看<a href="http://t.cn/zl82CAH">这里</a>。OK，字符串编辑距离这个问题实用性很强，限于篇幅，详情读者自己深入吧。  </p>
		  </article>
		  
			<div id="nav">
				
					<a href="28.0.html">prev</a>
					|
				
				
					<a href="30.0.html">next</a>
				
				<span style="float: right"><a href="index.html">Back to home</a>
			</div>
		  
		</div>
	</div>
  </div>
  
  <div>&nbsp;</div>
  </div>
  <div style="text-align:center; margin-bottom: 30px">
	  Generated by <a href="https://github.com/marchtea/md_to_github_html">mdtogh</a>
  </div>
</body>
</html>